@using OATS_Capstone.Models
@{
    ViewBag.Title = "Index";
}
@model OATS_Capstone.Models.Test
@{
    var authen=AuthenticationSessionModel.Instance();
    var user = authen.User;
    var owner = authen.OwnerUser;
    }
<script src="~/Resource/Scripts/NewTestScript.js"></script>
<div class="navbar navbar-static-top">
    <div class="navbar-inner">
        <div id="savestatus" style="display: none;">
            <span class="nt-desc" style="display: inline;"></span>
        </div>
        <div class="container">
            <a id="logo" class="brand" href="#">OATS</a>
            <div class="nav-collapse collapse navbar-responsive-collapse">
                <ul class="nav">
                    <li class="active"><a href="@Url.Action("Index", "Tests")"><i class="t-icon i-tests"></i>Tests</a></li>
                    <li><a href="@Url.Action("Index", "Teachers")"><i class="t-icon i-teachers"></i>Teachers</a></li>
                    <li><a href="@Url.Action("Index", "Students")"><i class="t-icon i-student"></i>Students</a></li>
                    <li>
                        <button class="btn oval" onclick="window.location='@Url.Action("MakeTest")'">New</button></li>
                </ul>

               <ul class="nav pull-right">
                    <li>
                        <div class="navbar-search pull-left">
                            <input type="text" class="nt-search-input search-query" placeholder="Search Tests" />
                        </div>
                    </li>
                    <li class="divider-vertical"></li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="t-icon icon-user"></i><b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            @if (authen.IsCurrentUserAlsoOwner) { 
                                <li class="nav-header">Welcome: @(owner.FirstName??owner.LastName??owner.UserMail)</li>
                            <li class="divider"></li>
                            <li><a href="#">My Account</a></li>
                            <li><a id="logout-link" href="#">Logout</a></li>
                            }else{
                            <li class="nav-header">Tests Holder: @(owner.FirstName??owner.LastName??owner.UserMail)</li>
                            <li class="nav-header">@(user.FirstName??user.LastName??user.UserMail)</li>
                            <li class="divider"></li>
                            <li><a href="#">My Account</a></li>
                            <li><a id="logout-link" href="#">Logout</a></li>
                                }
                        </ul>
                    </li>
                </ul>
            </div>
            <!-- /.nav-collapse -->
        </div>
    </div>
    <!-- /navbar-inner -->
</div>
<div id="container" class="container wrapper nt-de-cont">
    @*<div class="nt-header">Demo to copy</div>*@
    <div class="nt-checklist-cont" style="height: 500px; overflow-y: auto;">
        <div class="nt-msg"></div>
        <div class="nt-username">Admin User</div>
        @*<div class="nt-asm-title">Demo to copy</div>*@
        <div id="checklist">
            @if (Model == null)
            { @Html.Partial("P_Type_Empty_Template") }
            else
            {
                if (Model.Questions.Count == 0)
                {
                @Html.Partial("P_Type_Empty_Template")
                }
                else
                {
                    var orderedQuestions = Model.Questions.OrderBy(i => i.SerialOrder);
                    foreach (var question in orderedQuestions)
                    {
                    @Html.Partial("P_Question_Instance_DoTest", question)
                    }
                }
            }
        </div>
    </div>
    <div class="nt-footer" style="display: block;">
        <div class="nt-footer-cont">
            <div class="nt-resp-stat">
                <div class="nt-resp-stat-desc">0 of 4 answered - 0% complete</div>
                <div class="nt-resp-stat-bar ui-progressbar ui-widget ui-widget-content ui-corner-all" role="progressbar" aria-valuemin="0" aria-valuemax="4" aria-valuenow="0">
                    <div class="ui-progressbar-value ui-widget-header ui-corner-left" style="display: none; width: 0%;"></div>
                </div>
            </div>
            <button class="nt-btn-submit nt-submit">Submit</button>
            <div class="nt-footer-right">
                <div class="nt-time-remaining" id="c427">
                    <div class="nt-time-remaining-text">Time remaining:</div>
                    <div class="nt-time-remaining-value nt-full">
                        <div class="nt-time-digits">1</div>
                        <div class="nt-hour">hour</div>
                        <div class="nt-time-digits">46</div>
                        <div class="nt-minute">minutes</div>
                    </div>
                    <div class="nt-time-remaining-value nt-abbr">
                        <div class="nt-time-digits">1</div>
                        <div class="nt-hour">hr</div>
                        <div class="nt-time-digits">46</div>
                        <div class="nt-minute">mins</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
