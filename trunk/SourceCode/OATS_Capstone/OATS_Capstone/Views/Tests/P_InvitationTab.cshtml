@using OATS_Capstone.Models
@model OATS_Capstone.Models.Test
@{
    var studentsInvited = Model.Invitations.Where(i => i.Role.RoleDescription == "Student");
    var teachersInvited = Model.Invitations.Where(i => i.Role.RoleDescription == "Teacher");
    var authen = OATS_Capstone.Models.AuthenticationSessionModel.Instance();
    var isOwner = Model.CreatedUserID == authen.UserId;
}
<div class="nt-asm-inv">
    <div class="nt-asm-inv-cont" style="height: 500px; overflow-y: auto;">
        <div class="nt-asm-inv-table-cont nt-learner">
            <div class="nt-asm-inv-head">
                <div class="nt-asm-inv-title"><span>Invited Students</span><span class="nt-cnt">(@studentsInvited.Count())</span></div>
            </div>
            <table>
                <thead>
                    <tr>
                        <th class="nt-desc">Name</th>
                        <th class="nt-desc">Email Address</th>
                        <th class="nt-ctrl"></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var invitation in studentsInvited)
                    {
                        @Html.Partial("P_InvitationTab_Invitation_Item",invitation)
                    }
                </tbody>
                @if(isOwner){
                <tfoot>
                    <tr>
                        <td colspan="3">
                            <button id="btn-invite-more-student" style="display: inline-block;" class="nt-btn-submit t-icon-left">
                                <i class="icon-envelope"></i>
                                Invite More Students
                            </button>
                            <button id="btn-remove-student" style="display: block;" class="nt-btn-light t-icon-left">
                                <i class="icon-remove"></i>
                                Remove
                            </button>
                            <button id="btn-reinvite-student" style="display: block;" class="nt-btn-light t-icon-left">
                                <i class="icon-repeat"></i>
                                Re-invite
                            </button>
                        </td>
                    </tr>
                </tfoot>
                }
            </table>

        </div>
        <div class="nt-asm-inv-table-cont nt-educator">
            <div class="nt-asm-inv-head">
                <div class="nt-asm-inv-title"><span>Invited Educators</span><span class="nt-cnt">(@teachersInvited.Count())</span></div>
            </div>
            <table>
                <thead>
                    <tr>
                        <th class="nt-desc">Name</th>
                        <th class="nt-desc">Email Address</th>
                        <th class="nt-ctrl"></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var invitation in teachersInvited)
                    {
                        @Html.Partial("P_InvitationTab_Invitation_Item",invitation)
                    }
                </tbody>
                 @if(isOwner){
                <tfoot>
                    <tr>
                        <td colspan="3">
                            <button id="btn-invite-more-teacher" style="visibility: visible; display: inline-block;" class="nt-btn-submit t-icon-left nt-guide" data-action="invite" data-guide="inv_educator_more">
                                <i class="icon-envelope"></i>
                                Invite More Educators
                            </button>
                            <button id="btn-remove-teacher" style="visibility: visible; display: block;" class="nt-btn-light t-icon-left">
                                <i class="icon-remove"></i>
                                Remove
                            </button>
                            <button id="btn-reinvite-teacher" style="visibility: visible; display: block;" class="nt-btn-light t-icon-left nt-guide" data-action="re_invite" data-guide="inv_reinv">
                                <i class="icon-repeat"></i>
                                Re-invite
                            </button>
                        </td>
                    </tr>
                </tfoot>
                 }
            </table>
        </div>
    </div>
</div>



