@model OATS_Capstone.Models.Question
@{
    var sortedAns = Model.Answers.OrderBy(i => i.SerialOrder);
    var tags = Model.TagInQuestions.OrderBy(i => i.SerialOrder).Select(i => i.Tag);

    var isOwner = true;
    if (ViewBag.isOwner != null)
    {
        isOwner = ViewBag.isOwner;
    }
}
@if (isOwner)
{
    <div class="nt-qitem nt-qitem-edit nt-qitem-edit-inact" question-type="Multiple" question-id="@Model.QuestionID">
        <div class="nt-qnum ">@Model.LabelOrder</div>
        <a class="nt-qanchor"></a>
        <!-- NOT isImg START -->


        <div class="nt-conted-ph-cont" style="position: relative; overflow: hidden;">
            <div class="redactor_box">
                <div class="nt-qtext nt-qedit nt-delayedblur redactor_editor" contenteditable="true">@Html.Raw(Model.QuestionTitle)</div>
            </div>

            <!-- NOT isImg END -->

            <!-- isImg START -->
            <!-- isImg END -->

            <div class="nt-qhctrls">
                <button class="nt-btn-circle bt-duplicate"><i class="t-icon i-duplicate"></i></button>
                <button class="nt-btn-circle bt-delete"><i class="icon-remove"></i></button>
            </div>

            <div class="nt-qanscont nt-sortable">
                @foreach (var ans in sortedAns)
                {
                    <div class="nt-qans nt-qans-edit nt-qans-hover" answer-id="@ans.AnswerID">
                        <div class="nt-qanselem">
                            @if (ans.IsRight)
                            { 
                                <input type="checkbox" checked="checked" />
                            }
                            else
                            {
                                <input type="checkbox" />
                            }
                        </div>
                        <div class="nt-conted-ph-cont" style="position: relative; overflow: visible;">
                            <div class="redactor_box">
                                <div class="nt-qansdesc nt-qedit nt-delayedblur redactor_editor" contenteditable="true">@Html.Raw(ans.AnswerContent)</div>
                            </div>
                        </div>
                        <div class="nt-qansscore">
                            <span class="nt-qscorelabel">Choosen:</span>
                            <input type="text" class="nt-on-score nt-chk-score" placeholder="Pts" value="@ans.Score" />
                        </div>
                        <div class="nt-qansctrls">
                            <button class="nt-btn-circle bt-delete" style="display: none;">
                                <i class="icon-remove"></i>
                            </button>
                        </div>

                    </div>
                }
            </div>


            <div class="nt-qfoot">

                <div class="nt-qctrls" style="display: none;">

                    <button class="nt-btn-text nt-qansadd" style="display: none;">
                        Add New Answer
                    </button>


                    @Html.Partial("P_Change_Question_Type","Multiple")

                    <button class="nt-btn-text nt-scrbtn">
                        Points
                    </button>
                </div>
                <div class="nt-qtagcont" style="border-top-width: 0px; display: block;">
                    <div class="hoverscroll horizontal" style="width: 100%; height: 28px;">
                        <div class="listcontainer" style="width: 100%; height: 27px;">
                            <div class="nt-tags list">
                                <div class="tags-container">
                                    @foreach (var item in tags)
                                    {
                                        @Html.Partial("P_Tag_Item", item)
                                    }
                                </div>
                                <div class="nt-tag-adder item">
                                    <input type="text" placeholder="Add Tag..." autocomplete="off" />
                                </div>
                            </div>
                            <div class="arrow left" style="display: none;"><i class="icon-chevron-left"></i></div>
                            <div class="arrow right" style="display: none;"><i class="icon-chevron-right"></i></div>
                        </div>
                    </div>
                </div>


                <button class="nt-btn-sqr nt-qctrls-qtags-toggle" style="display: none;">
                    <i class="t-icon i-setting"></i>
                </button>
            </div>

        </div>
    </div>
}
else
{
    <div class="nt-qitem nt-qitem-edit nt-qitem-edit-inact" data-not-owner question-type="Multiple" question-id="@Model.QuestionID">
        <div class="nt-qnum ">@Model.LabelOrder</div>
        <a class="nt-qanchor"></a>
        <!-- NOT isImg START -->


        <div class="nt-conted-ph-cont" style="position: relative; overflow: hidden;">
            <div class="redactor_box">
                <div class="nt-qtext nt-qedit nt-delayedblur redactor_editor">@Html.Raw(Model.QuestionTitle)</div>
            </div>

            <div class="nt-qanscont nt-sortable">
                @foreach (var ans in sortedAns)
                {
                    <div class="nt-qans nt-qans-edit nt-qans-hover" answer-id="@ans.AnswerID" data-not-owner>
                        <div class="nt-qanselem">
                            @if (ans.IsRight)
                            { 
                                <input type="checkbox" disabled checked="checked" />
                            }
                            else
                            {
                                <input type="checkbox" disabled />
                            }
                        </div>
                        <div class="nt-conted-ph-cont" style="position: relative; overflow: visible;">
                            <div class="redactor_box">
                                <div class="nt-qansdesc nt-qedit nt-delayedblur redactor_editor">@Html.Raw(ans.AnswerContent)</div>
                            </div>
                        </div>
                        <div class="nt-qansscore">
                            <span class="nt-qscorelabel">Choosen:</span>
                            <input type="text" class="nt-on-score nt-chk-score" disabled placeholder="Pts" value="@ans.Score" />
                        </div>

                    </div>
                }
            </div>


            <div class="nt-qfoot">

                <div class="nt-qctrls" style="display: none;">

                    <button class="nt-btn-text nt-scrbtn">
                        Points
                    </button>
                </div>
                <div class="nt-qtagcont" style="border-top-width: 0px; display: block;">
                    <div class="hoverscroll horizontal" style="width: 100%; height: 28px;">
                        <div class="listcontainer" style="width: 100%; height: 27px;">
                            <div class="nt-tags list">
                                <div class="tags-container">
                                    @foreach (var item in tags)
                                    {
                                        @Html.Partial("P_Tag_Item", item)
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


            </div>

        </div>
    </div>
}